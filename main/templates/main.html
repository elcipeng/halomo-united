{% extends 'base.html' %}

{% block content %}
<h1>HaloMo United</h1>

<h5>NPM:</h5>
<p>{{ npm }}</p>

<h5>Name:</h5>
<p>{{ name }}</p>

<h5>Class:</h5>
<p>{{ class }}</p>

<h5>Logged in as:</h5>
<p>{{ request.user.username }}</p>

<a href="{% url 'main:create_product' %}">
  <button>+ Add Product</button>
</a>
<a href="{% url 'main:logout' %}">
  <button>Logout</button>
</a>

<h5>Sesi terakhir login: {{ last_login }}</h5>
<hr>

<a href="?filter=all">
  <button type="button">All Products</button>
</a>
<a href="?filter=my">
  <button type="button">My Products</button>
</a> 

{% if not product_list %}
  <p>Belum ada produk di HaloMo United.</p>
{% else %}

{% for product in product_list %}
<div>
  <h2><a href="{% url 'main:show_product' product.id %}">{{ product.name }}</a></h2>

  <p><b>Price:</b> Rp {{ product.price }} 
  {% if product.is_featured %}| <b>Featured</b>{% endif %}
  {% if product.is_discounted %}| <b>Discount</b>{% endif %}
  | <i>Created at: {{ product.created_at|date:"d M Y H:i" }}</i>
  | <b>Category:</b> {{ product.category }}
  | <b>Owner:</b> {{ product.user.username }}
  </p>

  {% if product.thumbnail %}
    <img src="{{ product.thumbnail }}" alt="{{ product.name }}" width="200">
    <br />
  {% endif %}

  <p>{{ product.description|truncatewords:25 }}...</p>

  <p><a href="{% url 'main:show_product' product.id %}"><button>Detail</button></a></p>
</div>
<hr>
{% endfor %}


{% endif %}
{% endblock content %}
